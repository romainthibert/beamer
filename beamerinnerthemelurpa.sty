\newcommand\summarytitle[1]{\renewcommand\@summarytitle{#1}}
\newcommand\@summarytitle{}

\mode<presentation>

\setbeamertemplate{titlepage}{%
{\begin{frame}[special]
    \vspace{44pt}
    \begin{beamercolorbox}{title}
        \usebeamerfont{title}\inserttitle
    \end{beamercolorbox}
    \vspace{2pt}
    \begin{beamercolorbox}{author}
        \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
    \vspace{22pt}
    \begin{beamercolorbox}{subtitle}
        \usebeamerfont{subtitle}\insertsubtitle
    \end{beamercolorbox}
\end{frame}
}}

%Table of Content
\setbeamertemplate{section in toc}{%
    {\color{slideprimary}\hspace{2em}\inserttocsectionnumber.}~\inserttocsection}
\setbeamertemplate{subsection in toc}{%
    \hspace{4em}{\color{slideprimary}\rule{1ex}{1ex}}~\inserttocsubsection\par}

% Creating recap slides with a ToC at the beginning of each section
\AtBeginSection[]{
\begin{frame}{\@summarytitle}
\begin{columns}
\begin{column}{0.4\textwidth}
\tableofcontents[currentsection,hideallsubsections]
\end{column}
\begin{column}{0.6\textwidth}
\setbeamertemplate{section in toc}{}
\tableofcontents[currentsection,sectionstyle=show/hide,hideothersubsections]
\setbeamertemplate{section in toc}{%
    {\color{slideprimary}\hspace{2em}\inserttocsectionnumber.}~\inserttocsection}
\end{column}
\end{columns}
\end{frame}
}

% Itemize tokens format
\setbeamertemplate{itemize item}{\scriptsize $\square$}
\setbeamertemplate{itemize subitem}{\rule{1ex}{1ex}}
\setbeamertemplate{itemize subsubitem}{\bf -}

% Title on top of pages
\defbeamertemplate*{frametitle}{}{%
    \leavevmode%
    \begin{beamercolorbox}[wd=\paperwidth]{}
        \begin{beamercolorbox}[wd=9mm,ht=3ex,dp=1.5ex]{beforetitle}
        \end{beamercolorbox}%
        \hfill%
        \begin{beamercolorbox}[wd=\paperwidth,ht=3ex,dp=1.5ex]{frametitle}
            \hspace{1em}
            \makebox{\insertframetitle}
        \end{beamercolorbox}%
    \end{beamercolorbox}%
    \vskip0pt%
}

% Closing Slide
\setbeamertemplate{endpage}{%
{\begin{frame}[special]
    \vspace{44pt}
    \begin{beamercolorbox}{title}
        \usebeamerfont{title}\inserttitle
    \end{beamercolorbox}
    \vspace{2pt}
    \begin{beamercolorbox}{author}
        \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
    \vspace{22pt}
    \begin{beamercolorbox}{subtitle}
        \centering\usebeamerfont{subtitle}\Large{Merci pour votre attention.}
    \end{beamercolorbox}
\end{frame}
}}

\setbeamertemplate{endpage_en}{%
{\begin{frame}[special]
    \vspace{44pt}
    \begin{beamercolorbox}{title}
        \usebeamerfont{title}\inserttitle
    \end{beamercolorbox}
    \vspace{2pt}
    \begin{beamercolorbox}{author}
        \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
    \vspace{22pt}
    \begin{beamercolorbox}{subtitle}
        \centering\usebeamerfont{subtitle}\Large{Thank you for your attention !}
    \end{beamercolorbox}
    \vspace{11pt}
    \begin{beamercolorbox}{subtitle}
        \centering\usebeamerfont{subtitle}\Large{Thank you for your attention !}
    \end{beamercolorbox}
\end{frame}
}}

%Blocks
\setbeamertemplate{blocks}[rounded]

\mode<all>
